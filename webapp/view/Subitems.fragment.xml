<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:l="sap.ui.layout" xmlns:form="sap.ui.layout.form">

           <Table 
            keyboardMode="Edit"
            alternateRowColors="true" width="100%" showSeparators="All" growing="false" items="{path:'subitems', templateShareable:true, parameters:{expand:'material,informacao,canal'} }"
           id="subitemsList"
           >
           <!--
           itemPress="onSubitemPress"
           >
           -->

                <headerToolbar>
                    <Toolbar width="auto" height="46px" design="Transparent" visible="true" enabled="true">
                        <content>
                            <ToolbarSpacer width=""/>
                            <ToggleButton tooltip="Ocultar informações atuais" type="Transparent" icon="sap-icon://hide" pressed="{view>/ocultarInformacoesAtuais}"/>
                        </content>
                        <tooltip/>
                    </Toolbar>
                </headerToolbar>

                <columns>
                    <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Phone" demandPopin="false" popinDisplay="Inline" mergeDuplicates="false">
                        <header>
                            <Text text="UF" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                        </header>
                        <footer/>
                    </Column>
                    <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Phone" demandPopin="false" popinDisplay="Inline" mergeDuplicates="false">
                        <header>
                            <Text text="Canal" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                        </header>
                        <footer/>
                    </Column>
                    <Column width="20%" hAlign="Left" vAlign="Top" minScreenWidth="Phone" demandPopin="false" popinDisplay="Inline" mergeDuplicates="false">
                        <header>
                            <Text text="Material" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                        </header>
                        <footer/>
                    </Column>

                    <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false" visible="{negociacao/tipoNegociacao/ExibirVolume}">
                        <header>
                            <Text text="Volume [UN]" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                        </header>
                        <footer/>
                    </Column>

                    <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                        <header>
                            <Text text="Custo" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                        </header>
                        <footer/>
                    </Column>
                    <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                        <header>
                            <Text text="PMZ Novo" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                        </header>
                        <footer/>
                    </Column>

                    <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                        <header>
                            <Text text="Preço de venda [BRL]" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                        </header>
                        <footer/>
                    </Column>

                    <!--
                    <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                        <header>
                            <Text text="Previsão de venda [UN]" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                        </header>
                        <footer/>
                    </Column>
                    -->

                    <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                        <header>
                            <Text text="Margem 2" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                        </header>
                        <footer/>
                    </Column>

                    <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                        <header>
                            <Text text="Margem Teórica" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                        </header>
                        <footer/>
                    </Column>

                    <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                        <header>
                            <Text text="IC" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                        </header>
                        <footer/>
                    </Column>

                </columns>
                <items>
                    <ColumnListItem type='Active'>
                        <cells>
                            <ObjectIdentifier title="{CentroID}" text="" titleActive="false" visible="true"/>
                            <ObjectIdentifier title="{canal/Nome}" text="" titleActive="false" visible="true"/>
                            <ObjectIdentifier title="{
                                path: 'material/ID',
                                type: 'sap.ui.model.odata.type.String',
                                constraints: {
                                    isDigitSequence : true,
                                    maxLength : 18
                                    }
                                }"
                                text="{material/Nome}" titleActive="false" visible="true"/>

                            <Input value="{
                                path: 'Volumem',
                                type: 'sap.ui.model.odata.type.Decimal',
                                constraints: { scale: 2 }
                                }"
                                submit="realizarSimulacaoSubitem"
                                visible="{negociacao/tipoNegociacao/ExibirVolume}"
                                />


                            <VBox alignItems="End">

                                <ObjectNumber
                                    number="{path: 'Custo', type: 'sap.ui.model.odata.type.Decimal', constraints: { scale: 2 }}"
                                    unit="BRL" emphasized="true"
                                    state="{
                                        parts: [ {path: 'Custo'}, {path: 'informacao/Custo'} ],
                                        formatter: '.formatter.warningIfSecondLowThanFirst'
                                        }"
                                    />

                                <ObjectNumber
                                    number="{
                                        path: 'informacao/Custo',
                                        type: 'sap.ui.model.odata.type.Decimal',
                                        constraints: { scale: 2 }
                                        }"
                                    unit="BRL" emphasized="true"
                                    visible="{=!${view>/ocultarInformacoesAtuais}}"
                                    tooltip="Informação Atual"
                                    />

                            </VBox>

                            <VBox alignItems="End">

                                <ObjectNumber
                                    number="{path: 'PMZNovo', type: 'sap.ui.model.odata.type.Decimal', constraints: { scale: 2 }}"
                                    unit="BRL" emphasized="true"
                                    state="{
                                        parts: [ {path: 'PMZNovo'}, {path: 'informacao/PMZNovo'} ],
                                        formatter: '.formatter.warningIfSecondLowThanFirst'
                                        }"
                                    />

                                <ObjectNumber
                                    number="{
                                        path: 'informacao/PMZNovo',
                                        type: 'sap.ui.model.odata.type.Decimal',
                                        constraints: { scale: 2 }
                                        }"
                                    unit="BRL" emphasized="true"
                                    visible="{=!${view>/ocultarInformacoesAtuais}}"
                                    tooltip="Informação Atual"
                                    />

                            </VBox>

                            <VBox alignItems="End">

                                <Input value="{
                                    path: 'PrecoVenda',
                                    type: 'sap.ui.model.odata.type.Decimal',
                                    constraints: { scale: 2 }
                                    }"
                                    submit="realizarSimulacaoSubitem"
                                    />

                                <ObjectNumber
                                    number="{
                                        path: 'informacao/PrecoVenda',
                                        type: 'sap.ui.model.odata.type.Decimal',
                                        constraints: { scale: 2 }
                                        }"
                                    unit="BRL" emphasized="true"
                                    visible="{=!${view>/ocultarInformacoesAtuais}}"
                                    tooltip="Informação Atual"
                                    />


                            </VBox>

                            <!--
                            <VBox alignItems="End">

                                <Input value="{
                                    path: 'PrevisaoVenda',
                                    type: 'sap.ui.model.odata.type.Decimal',
                                    constraints: { scale: 2 }
                                    }"
                                    submit="realizarSimulacaoSubitem"
                                    />

                            </VBox>
                            -->

                            <VBox alignItems="End">

                                <ObjectNumber
                                    number="{
                                        path: 'Margem2',
                                        type: 'sap.ui.model.odata.type.Decimal',
                                        constraints: { scale: 2 }
                                        }"
                                    unit="%"
                                    state="{
                                        parts: [ {path: 'Margem2'}, {path: 'informacao/MargemTeorica'}],
                                        formatter: '.formatter.margemStatus'
                                        }"
                                    />

                                <ObjectNumber
                                    number="{
                                        path: 'informacao/Margem2',
                                        type: 'sap.ui.model.odata.type.Decimal',
                                        constraints: { scale: 2 }
                                        }"
                                    unit="%" emphasized="true"
                                    visible="{=!${view>/ocultarInformacoesAtuais}}"
                                    tooltip="Informação Atual"
                                    />
                            </VBox>

                            <VBox alignItems="End">
                                <ObjectNumber
                                    number="{
                                        path: 'informacao/MargemTeorica',
                                        type: 'sap.ui.model.odata.type.Decimal',
                                        constraints: { scale: 2 }
                                        }"
                                    unit="%" emphasized="true"
                                    />
                            </VBox>

                            <VBox alignItems="End">

                                <ObjectNumber
                                    number="{
                                        path: 'IC',
                                        type: 'sap.ui.model.odata.type.Decimal',
                                        constraints: { scale: 2 }
                                        }"
                                    unit="%"
                                    state="{
                                        parts: [ {path: 'IC'} ],
                                        formatter: '.formatter.icStatus'
                                        }" />

                                <ObjectNumber
                                    number="{
                                        path: 'informacao/IC',
                                        type: 'sap.ui.model.odata.type.Decimal',
                                        constraints: { scale: 2 }
                                        }"
                                    unit="%" emphasized="true"
                                    visible="{=!${view>/ocultarInformacoesAtuais}}"
                                    tooltip="Informação Atual"
                                    />

                            </VBox>

                        </cells>
                    </ColumnListItem>
                </items>
            </Table>


</core:FragmentDefinition>


