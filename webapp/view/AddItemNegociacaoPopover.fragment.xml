<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core">
    <ResponsivePopover
        title="Adicionar Itens: {Descricao}"
        class="sapUiPopupWithPadding"
        contentWidth="480px"
        contentHeight="480px"
        placement="Left" >

        <beginButton>
            <Button text="Adicionar" type="Emphasized" press="onAdd" />
        </beginButton>

        <endButton>
            <Button text="Cancelar" press="onCancel" />
        </endButton>

        <content>
            <NavContainer
                initialPage='gruposListas'
                id="navCon">

                <Page
                    id="gruposListas"
                    navButtonPress="onNavBack"
                    title="Listas Disponiveis">
                    <subHeader>
                        <Toolbar>
                            <SearchField
                                width="100%" />
                        </Toolbar>
                    </subHeader>

                    <Table alternateRowColors="true" width="100%" noDataText="No data" mode="MultiSelect" showSeparators="All" growing="true" growingThreshold="20" growingScrollToLoad="true" itemPress="onGrupoListaSelected" items="{listas>/GrupoListaSet}" id='listGruposListas'>

                        <columns>

                            <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                <header>
                                    <Text text="Fornecedor" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                </header>
                                <footer/>
                            </Column>

                            <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                <header>
                                    <Text text="UF" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                </header>
                                <footer/>
                            </Column>

                            <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                <header>
                                    <Text text="G. Compra" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                </header>
                                <footer/>
                            </Column>

                            <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                <header>
                                    <Text text="Vigencia" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                </header>
                                <footer/>
                            </Column>

                        </columns>

                        <items>

                            <ColumnListItem type="Navigation">

                                <cells>

                                    <Text text="{listas>Fornecedor}" width="auto" maxLines="3" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                                    <Text text="{listas>Centro}" width="auto" maxLines="3" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                                    <Text text="{listas>GrupoCompra}" width="auto" maxLines="3" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                                    <Text text="{
                                        path: 'listas>DataAte',
                                        type: 'sap.ui.model.type.Date',
                                        formatOptions: { UTC: true, style: 'short' }}"
                                         width="auto" maxLines="3" wrapping="true" textAlign="Begin" textDirection="Inherit"/>

                                </cells>
                            </ColumnListItem>

                        </items>
                    </Table>

                </Page>

                <Page
                    id="produtos"
                    showNavButton="true"
                    navButtonPress="onNavBack"
                    title="Produtos da Lista">
                    <subHeader>
                        <Toolbar>
                            <SearchField
                                width="100%" />
                        </Toolbar>
                    </subHeader>
                    <List
                        id="listProdutos"
                        items="{listas>produtos}" >
                        <StandardListItem
                            title="{listas>ID}"
                            description="{listas>Nome}"
                            />
                    </List>
                </Page>


            </NavContainer>
        </content>
    </ResponsivePopover>
</core:FragmentDefinition>
